{"openapi":"3.0.0","info":{"title":"Danh sách các API","description":"Danh sách tất cả API của dự án","version":"0.1.0"},"components":{"securitySchemes":{"apiKey":{"type":"apiKey","name":"apiKey","in":"header"}},"schemas":{}},"paths":{"/user/addUser":{"post":{"summary":"addUser","tags":["User"],"description":"Thêm người dùng","requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["name","phone","address","email","birth_day","username","password"],"properties":{"name":{"type":"string","minLength":2,"maxLength":20,"errorMessage":{"type":"Tên phải là chuỗi","minLength":"Tên phải có ít nhất 2 ký tự ","maxLength":"Tên có độ dài tối đa 20 kí tự"}},"phone":{"type":"string","pattern":"^[0-9]{9,11}$","errorMessage":{"pattern":"Số điện thoại không đúng định dạng phải có 9-11 chữ số"}},"address":{"type":"string","minLength":5,"errorMessage":{"minLength":"Độ dài địa chỉ tối thiểu 5 ký tự"}},"email":{"type":"string","format":"email","errorMessage":{"format":"email không đúng định dạng"}},"birth_day":{"type":"string","format":"date","errorMessage":{"format":"Ngày sinh phải đúng địng dạng MMMM-NN-YY"}},"username":{"type":"string","minLength":2,"maxLength":20,"errorMessage":{"minLength":"username tối thiểu 2 kí tư","maxLength":"username tối đa 20 kí tự"}},"password":{"type":"string","minLength":8,"maxLength":20,"errorMessage":{"minLength":"username tối thiểu 8 kí tư","maxLength":"username tối đa 20 kí tự"}}},"errorMessage":{"required":{"name":"Thiếu tên người dùng","phone":"Thiếu số điện thoại","address":"Thiếu địa chỉ","email":"Thiếu email","birth_day":"Thiếu ngày sinh","username":"Thiếu tên đăng nhập","password":"Thiếu mật khẩu"}}}}},"required":true},"security":[{"apiKey":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"mes":{"type":"string"}}}}}}}}},"/user/getAllUser":{"get":{"summary":"getAllUser","tags":["User"],"description":"Lấy danh sách tất cả người dùng","security":[{"apiKey":[]}],"responses":{"200":{"description":"Danh sách Users","content":{"application/json":{"schema":{"description":"Danh sách Users","type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"phone":{"type":"string","pattern":"^[0-9]{9,11}$"},"address":{"type":"string"},"birth_day":{"type":"string","format":"date"},"email":{"type":"string","format":"email"},"username":{"type":"string"},"password":{"type":"string"},"created_at":{"type":"string","format":"date-time"}}}}}}}}}},"/user/updateUser/{id}":{"patch":{"summary":"updateUser","tags":["User"],"description":"Cập nhật thông tin người dùng","requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["name","phone","address","email","birth_day","password"],"properties":{"name":{"type":"string","minLength":2,"maxLength":20,"errorMessage":{"type":"Tên phải là chuỗi","minLength":"Tên phải có ít nhất 2 ký tự ","maxLength":"Tên có độ dài tối đa 20 kí tự"}},"phone":{"type":"string","pattern":"^[0-9]{9,11}$","errorMessage":{"pattern":"Số điện thoại không đúng định dạng phải có 9-11 chữ số"}},"address":{"type":"string","minLength":5,"errorMessage":{"minLength":"Độ dài địa chỉ tối thiểu 5 ký tự"}},"email":{"type":"string","format":"email","errorMessage":{"format":"email không đúng định dạng"}},"birth_day":{"type":"string","format":"date","errorMessage":{"format":"Ngày sinh phải đúng địng dạng MMMM-NN-YY"}},"password":{"type":"string","minLength":8,"maxLength":20,"errorMessage":{"minLength":"username tối thiểu 8 kí tư","maxLength":"username tối đa 20 kí tự"}}},"errorMessage":{"required":{"name":"Thiếu tên người dùng","phone":"Thiếu số điện thoại","address":"Thiếu địa chỉ","email":"Thiếu email","birth_day":"Thiếu ngày sinh","password":"Thiếu mật khẩu"}}}}},"required":true},"security":[{"apiKey":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"mes":{"type":"string"}}}}}}}}},"/user/deleteUser/{id}":{"delete":{"summary":"deleteUser","tags":["User"],"description":"Xóa người dùng","parameters":[{"schema":{"type":"integer","minimum":1,"errorMessage":{"type":"ID phải là số nguyên dương"}},"in":"path","name":"id","required":true}],"security":[{"apiKey":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"mes":{"type":"string"}}}}}}}}},"/user/getByidUser/{id}":{"get":{"summary":"Lấy thông tin người dùng theo ID","tags":["User"],"description":"Trả về thông tin chi tiết của người dùng dựa trên ID được cung cấp.","parameters":[{"schema":{"type":"integer"},"in":"path","name":"id","required":true,"description":"ID của người dùng"}],"responses":{"200":{"description":"Thông tin người dùng lấy thành công","content":{"application/json":{"schema":{"description":"Thông tin người dùng lấy thành công","type":"object","properties":{"id":{"type":"integer"},"username":{"type":"string"},"email":{"type":"string"},"full_name":{"type":"string"},"created_at":{"type":"string","format":"date-time"}}}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}}}},"/user/getByUsername":{"get":{"summary":"Tìm kiếm người dùng theo tên đăng nhập (username)","tags":["User"],"description":"Nhận danh sách người dùng có tên đăng nhập khớp hoặc chứa từ khóa được nhập.","parameters":[{"schema":{"type":"string"},"in":"query","name":"username","required":true,"description":"Tên đăng nhập hoặc ký tự cần tìm"}],"responses":{"200":{"description":"Danh sách người dùng tìm thấy","content":{"application/json":{"schema":{"description":"Danh sách người dùng tìm thấy","type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"username":{"type":"string"},"email":{"type":"string"},"full_name":{"type":"string"}}}}}}},"400":{"description":"Thiếu tên hoặc ký tự cần tìm","content":{"application/json":{"schema":{"description":"Thiếu tên hoặc ký tự cần tìm","type":"object","properties":{"error":{"type":"integer"},"mes":{"type":"string"}}}}}},"404":{"description":"Không tìm thấy người dùng phù hợp","content":{"application/json":{"schema":{"description":"Không tìm thấy người dùng phù hợp","type":"object","properties":{"error":{"type":"integer"},"mes":{"type":"string"}}}}}}}}},"/todos/addTodo":{"post":{"summary":"thêm công việc","tags":["Todos"],"description":"Thêm công vịệc, dữ liệu đầu vào là 1 object{owner_id,assignee_id,reviewer_id,name,description,deadline,group_id,file{file_name,file_path}}","requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["owner_id","assignee_id","reviewer_id","name","description","deadline","group_id","file"],"properties":{"owner_id":{"type":"number","errorMessage":{"type":"owner_id không hợp lệ"}},"assignee_id":{"type":"number","errorMessage":{"type":"owner_id không hợp lệ"}},"reviewer_id":{"type":"number","errorMessage":{"type":"reviewer_id không hợp lệ"}},"name":{"type":"string","minLength":5,"maxLength":20,"errorMessage":{"minLength":"Tên có độ dài tối thiểu 5 ký tự","maxLength":"Tên có độ dài tối đa 20 ký tự"}},"description":{"type":"string","minLength":10,"errorMessage":{"minLength":"Mô tả quá ngắn, ít nhất 10 kí tự"}},"deadline":{"type":"string","format":"date","errorMessage":{"format":"Ngày sinh phải đúng địng dạng MMMM-NN-YY"}},"group_id":{"type":"number"},"file":{"type":"object","required":["file_name","file_url"],"properties":{"file_name":{},"file_url":{}},"errorMessage":{"type":"file là 1 object {name,url}","required":{"name":"thiếu tên file","url":"thiêu đường dẫn file"}}}}}}},"required":true},"security":[{"apiKey":[]}],"responses":{"200":{"description":"Thêm công việc thành công","content":{"application/json":{"schema":{"description":"Thêm công việc thành công","type":"object","properties":{"mes":{"type":"string"}},"required":["mes"]}}}}}}},"/todos/getAllTodo":{"get":{"summary":"Lấy danh sách tất cả công việc (todos)","tags":["Todos"],"description":"Trả về toàn bộ danh sách công việc trong hệ thống, bao gồm các thông tin cơ bản như tên, trạng thái và hạn chót.","responses":{"200":{"description":"Danh sách công việc lấy thành công","content":{"application/json":{"schema":{"description":"Danh sách công việc lấy thành công","type":"array","items":{"type":"object","properties":{"id":{"type":"integer","description":"ID của công việc"},"name":{"type":"string","description":"Tên công việc"},"status":{"type":"string","description":"Trạng thái hiện tại của công việc (ví dụ: pending, done, in-progress)"},"deadline":{"type":"string","format":"date-time","description":"Thời hạn hoàn thành công việc"}}}}}}},"500":{"description":"Lỗi máy chủ hoặc truy vấn cơ sở dữ liệu thất bại","content":{"application/json":{"schema":{"description":"Lỗi máy chủ hoặc truy vấn cơ sở dữ liệu thất bại","type":"object","properties":{"error":{"type":"integer"},"mes":{"type":"string"}}}}}}}}},"/todos/updateTodo/{id}":{"patch":{"tags":["Todos"],"description":"Cập nhật thông tin của công việc","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","minLength":5,"maxLength":50,"errorMessage":{"type":"Tên phải là chuỗi","minLength":"Tên nhóm phải có ít nhất 5 ký tự ","maxLength":"Tên nhóm có độ dài tối đa 50 kí tự"}},"description":{"type":"string","minLength":10,"errorMessage":{"minLength":"Mô tả quá ngắn, ít nhất 10 kí tự"}},"deadline":{"type":"string","format":"date","errorMessage":{"format":"Ngày sinh phải đúng địng dạng MMMM-NN-YY"}}}}}}},"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true,"description":"user id"}],"security":[{"apiKey":[]}],"responses":{"200":{"description":"Default Response"}}}},"/todos/deleteTodo/{id}":{"delete":{"summary":"Xóa công việc theo ID","tags":["Todos"],"description":"Xóa một công việc (todo) khỏi cơ sở dữ liệu dựa trên ID được cung cấp trong URL.","parameters":[{"schema":{"type":"integer","minimum":1,"errorMessage":{"type":"ID phải là số nguyên","minimum":"ID phải lớn hơn hoặc bằng 1"}},"in":"path","name":"id","required":true,"description":"ID của công việc cần xóa"}],"security":[{"apiKey":[]}],"responses":{"200":{"description":"Xóa công việc thành công","content":{"application/json":{"schema":{"description":"Xóa công việc thành công","type":"object","properties":{"mes":{"type":"string","example":"xoa thanh cong"}}}}}},"404":{"description":"Không tìm thấy công việc cần xóa","content":{"application/json":{"schema":{"description":"Không tìm thấy công việc cần xóa","type":"object","properties":{"error":{"type":"integer","example":404},"mes":{"type":"string","example":"Công việc không tồn tại"}}}}}},"500":{"description":"Lỗi máy chủ nội bộ","content":{"application/json":{"schema":{"description":"Lỗi máy chủ nội bộ","type":"object","properties":{"error":{"type":"integer","example":500},"mes":{"type":"string","example":"Lỗi khi xóa công việc"}}}}}}}}},"/group/addGroup":{"post":{"summary":"AddGroup","tags":["Group"],"description":"Thêm mới 1 group","requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["name","description","owner_id","creator_id","files"],"properties":{"name":{"type":"string","minLength":5,"maxLength":30,"errorMessage":{"type":"Tên phải là chuỗi","minLength":"Tên phải có ít nhất 5 ký tự ","maxLength":"Tên có độ dài tối đa 30 kí tự"}},"description":{"type":"string","minLength":1,"errorMessage":{"minLength":"Mô tả không được bỏ trống "}},"owner_id":{"type":"number","errorMessage":{"type":" owner_id không hợp lệ"}},"creator_id":{"type":"number","errorMessage":{"type":" creator_id không hợp lệ"}},"files":{"type":"object","required":["name","url"],"properties":{"name":{},"url":{}},"errorMessage":{"type":"file là 1 object {name,url}","required":{"name":"thiếu tên file","url":"thiêu đường dẫn file"}}}}}}},"required":true},"security":[{"apiKey":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"mes":{"type":"string"}}}}}}}}},"/group/getAllGroup":{"get":{"summary":"Lấy tất cả group","tags":["Group"],"description":"Lấy danh sách tất cả nhóm cùng thông tin file và thành viên","responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"Nhóm phát triển backend"},"description":{"type":"string","example":"Nhóm chịu trách nhiệm phần backend của dự án"},"created_at":{"type":"string","format":"date-time","example":"2025-10-25T08:00:00Z"},"updated_at":{"type":"string","format":"date-time","nullable":true,"example":"2025-10-26T12:30:00Z"},"files":{"type":"array","items":{"type":"string","example":"https://example.com/uploads/design_doc.pdf"}},"group_members":{"type":"array","items":{"type":"object","properties":{"member_id":{"type":"integer","example":12},"member_name":{"type":"string","example":"Nguyễn Văn A"}}}}}}}}}}}}},"/group/updateGroup/{id}":{"patch":{"summary":"Cập nhật group","tags":["Group"],"description":"Cập nhật thông tin nhóm theo ID","requestBody":{"content":{"application/json":{"schema":{"type":"object","description":"Các trường cần cập nhật (ít nhất 1 trường)","properties":{"name":{"type":"string","example":"Nhóm lập trình Frontend"},"description":{"type":"string","example":"Nhóm đảm nhận phần giao diện người dùng"},"updated_at":{"type":"string","format":"date-time","example":"2025-10-25T12:00:00Z"}},"minProperties":1,"additionalProperties":false}}},"description":"Các trường cần cập nhật (ít nhất 1 trường)"},"parameters":[{"schema":{"type":"integer","example":1},"in":"path","name":"id","required":true,"description":"ID của nhóm cần cập nhật"}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"mes":{"type":"string","example":"cap nhat thanh cong"}}}}}}}}},"/group/deleteGroup/{id}":{"delete":{"summary":"Xóa group","tags":["Group"],"description":"Xóa group theo ID","parameters":[{"schema":{"type":"integer","example":1},"in":"path","name":"id","required":true,"description":"ID của group cần xóa"}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"mes":{"type":"string","example":"xoa group thanh cong"}}}}}}}}},"/group/addMembers/{id}":{"post":{"summary":"thêm thành viên","tags":["Group"],"description":"Thêm thành viên vào nhóm","requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["user_id"],"properties":{"user_id":{"type":"array","items":{"type":"integer"},"uniqueItems":true,"minItems":1,"errorMessage":{"type":"user_id phải là một mảng số nguyên","uniqueItems":"Các user_id không được trùng nhau","minItems":"Phải có ít nhất 1 user_id"}}}}}},"required":true},"parameters":[{"schema":{"type":"number"},"in":"path","name":"id","required":true,"description":"group id"}],"security":[{"apiKey":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"mes":{"type":"string"}}}}}}}}},"/group/deleteMembers/{groupId}":{"delete":{"summary":"Xóa thành viên khỏi group","tags":["Group"],"description":"Xóa một thành viên khỏi group","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"user_id":{"type":"integer","description":"ID của người dùng cần xóa khỏi group","example":5}},"required":["user_id"]}}},"required":true},"parameters":[{"schema":{"type":"integer","example":2},"in":"path","name":"groupId","required":true,"description":"ID của group"}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"mes":{"type":"string","example":"xoa thanh cong"}}}}}}}}},"/todos/updateStatus/{id}":{"patch":{"tags":["Todos"],"description":"Cập nhật trạng thái công việc","requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["new","working","pending","closed","done"],"errorMessage":{"enum":"Trạng thái không hợp lệ(new,working,pending,closed,done)"}}},"errorMessage":{"required":{"status":"trạng thái không được bỏ trống"}}}}},"required":true},"parameters":[{"schema":{"type":"number"},"in":"path","name":"id","required":true,"description":"todo_id"}],"security":[{"apiKey":[]}],"responses":{"200":{"description":"Default Response"}}}},"/todos/updateProgress/{id}":{"patch":{"tags":["Todos"],"description":"Cập nhật tiến độ công việc","requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["progress"],"properties":{"progress":{"type":"number","minimum":0,"maximum":100,"errorMessage":{"type":"Giá trị phải là số","minimum":"giá trị tối thiểu 0%","maximum":"giá trị tối đa 100%"}}},"additionalProperties":false,"errorMessage":{"required":{"progress":"progress không được bỏ trống"},"additionalProperties":"Không được gửi thêm trường không hợp lệ!"}}}},"required":true},"parameters":[{"schema":{"type":"number"},"in":"path","name":"id","required":true,"description":"todo_id"}],"security":[{"apiKey":[]}],"responses":{"200":{"description":"Default Response"}}}},"/todos/detailtodos/{id}":{"get":{"summary":"Xem chi tiết công việc","tags":["Todos"],"description":"Lấy thông tin chi tiết của một công việc (todo) theo ID, bao gồm người tạo, người được giao, người duyệt và file đính kèm.","parameters":[{"schema":{"type":"integer","minimum":1,"errorMessage":{"type":"ID phải là số nguyên","minimum":"ID phải lớn hơn hoặc bằng 1"}},"in":"path","name":"id","required":true,"description":"ID của công việc cần xem chi tiết"}],"security":[{"apiKey":[]}],"responses":{"200":{"description":"Thông tin chi tiết của công việc","content":{"application/json":{"schema":{"description":"Thông tin chi tiết của công việc","type":"array","items":{"type":"object","properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"Hoàn thành báo cáo tuần"},"description":{"type":"string","example":"Viết báo cáo công việc tuần này"},"status":{"type":"string","example":"in_progress"},"progress":{"type":"integer","example":60},"deadline":{"type":"string","format":"date-time","example":"2025-10-30T17:00:00Z"},"done_day":{"type":"string","format":"date-time","nullable":true},"owner":{"type":"object","properties":{"id":{"type":"integer","example":1},"username":{"type":"string","example":"admin"}}},"assignee":{"type":"object","properties":{"id":{"type":"integer","example":2},"username":{"type":"string","example":"nhanvien1"}}},"reviewer":{"type":"object","properties":{"id":{"type":"integer","example":3},"username":{"type":"string","example":"truongphong"}}},"file_name":{"type":"string","example":"baocao.docx"},"file_path":{"type":"string","example":"/uploads/todos/baocao.docx"}}}}}}},"404":{"description":"Không tìm thấy công việc","content":{"application/json":{"schema":{"description":"Không tìm thấy công việc","type":"object","properties":{"error":{"type":"integer","example":404},"mes":{"type":"string","example":"Không tồn tại công việc với ID này"}}}}}}}}},"/todos/{type}/{id}":{"get":{"tags":["Todos"],"description":"Xem công việc theo vai trò","parameters":[{"schema":{"type":"string","enum":["owner","assignee","reviewer"],"errorMessage":{"type":"type phải là chuỗi","enum":"type chỉ được là \"owner\", \"assignee\" hoặc \"reviewer\""}},"in":"path","name":"type","required":true},{"schema":{"type":"integer","minimum":1,"errorMessage":{"type":"userId phải là số nguyên","minimum":"userId phải >= 1"}},"in":"path","name":"id","required":true,"description":"user_id"}],"security":[{"apiKey":[]}],"responses":{"200":{"description":"Default Response"}}}},"/todos/comments/{userId}/{todoId}":{"post":{"summary":"Thêm bình luận vào công việc (Todo)","tags":["Todos"],"description":"API cho phép người dùng thêm bình luận vào một Todo cụ thể.","requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["comment"],"properties":{"comment":{"type":"string","minLength":1,"maxLength":500,"description":"Nội dung bình luận của người dùng","example":"Công việc này đã hoàn thành xong phần báo cáo."}},"errorMessage":{"required":{"comment":"Thiếu nội dung bình luận"},"properties":{"comment":"Nội dung bình luận không hợp lệ (phải là chuỗi)"}}}}},"required":true},"parameters":[{"schema":{"type":"integer","minimum":1,"example":5},"in":"path","name":"userId","required":true,"description":"ID của người dùng bình luận"},{"schema":{"type":"integer","minimum":1,"example":12},"in":"path","name":"todoId","required":true,"description":"ID của công việc cần bình luận"}],"responses":{"200":{"description":"Bình luận đã được thêm thành công","content":{"application/json":{"schema":{"description":"Bình luận đã được thêm thành công","type":"object","properties":{"comment":{"type":"string","example":"Công việc này đã hoàn thành xong phần báo cáo."}}}}}}}}},"/todos/getComment/{todoId}":{"get":{"summary":"Lấy danh sách bình luận của một công việc","tags":["Todos"],"description":"Trả về toàn bộ bình luận thuộc về một Todo, bao gồm tên người bình luận, nội dung và thời gian tạo.","parameters":[{"schema":{"type":"integer","minimum":1,"example":10},"in":"path","name":"todoId","required":true,"description":"ID của công việc cần lấy bình luận"}],"responses":{"200":{"description":"Danh sách bình luận của công việc","content":{"application/json":{"schema":{"description":"Danh sách bình luận của công việc","type":"array","items":{"type":"object","properties":{"name":{"type":"string","description":"Tên người bình luận","example":"Nguyễn Văn A"},"content":{"type":"string","description":"Nội dung bình luận","example":"Công việc này nên hoàn thành trước ngày mai."},"created_at":{"type":"string","format":"date-time","description":"Thời gian bình luận được tạo","example":"2025-10-25T09:30:00Z"}}}}}}},"404":{"description":"Không tìm thấy bình luận cho Todo này","content":{"application/json":{"schema":{"description":"Không tìm thấy bình luận cho Todo này","type":"object","properties":{"error":{"type":"integer","example":404},"mes":{"type":"string","example":"Không có bình luận nào cho công việc này"}}}}}}}}},"/":{"get":{"responses":{"200":{"description":"Default Response"}}}},"/docs-json":{"get":{"responses":{"200":{"description":"Default Response"}}}}},"servers":[{"url":"http://localhost:3000","description":"Development server"}],"security":[{"apiKey":[]}],"externalDocs":{"url":"https://swagger.io","description":"Find more info here"}}